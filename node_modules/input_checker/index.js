"use strict";
const util = require('util');
const EventEmitter = require( 'events').EventEmitter;
const fs = require('fs');

function InputChecker(name, file) {
  this.name = name;
  this.writeStream = fs.createWriteStream('./__tmp__/' + file + '.txt', {
    'flags': 'a',
    'encoding': 'utf8',
    'mode': 0o666
  })
}

util.inherits(InputChecker, EventEmitter);

InputChecker.prototype.check = function check(input) {
  const command = input.trim().substr(0, 3);

  if (command === 'wr:') {
    this.emit('write', input.substr(3, input.length));
  } else if (command === 'en:') {
    this.emit('end');
  } else {
    this.emit('echo', input);
  }
}

exports.InputChecker = InputChecker;
